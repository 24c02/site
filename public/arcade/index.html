<!DOCTYPE html>
<html>
  <head>
    <!-- <style href="style.css"></style> -->
    <link rel="stylesheet" type="text/css" href="style.css" />
    <script src="data-loader.js"></script>
    <script>

      const containerImages = [
        "https://cloud-3mgl7gw96-hack-club-bot.vercel.app/0container1.png",
        "https://cloud-13mfwysva-hack-club-bot.vercel.app/0container2.png",
        "https://cloud-ly6qgiv93-hack-club-bot.vercel.app/0container3.png",
      ]

      const sample = (arr) => arr[Math.floor(Math.random() * arr.length)]
      const randomContainer = () => sample(containerImages)

      window.addEventListener("load", async () => {
        const inventory = await fetchedData()
        const itemList = document.querySelector('.item-list')
        console.log("populating page")
        inventory.sort((a, b) => {
          // sort by hours, but not everything will have hours set‚Äì put the stuff without hours at the end
          if (a.hours && b.hours) {
            return a.hours - b.hours
          } else if (a.hours) {
            return -1
          } else if (b.hours) {
            return 1
          } else {
            return 0
          }
        })
        inventory.forEach((inv, i) => {
          const el = document.createElement('div')
          el.classList.add('cell')

          const smallNameDiv = inv.smallName ? ' <span class="small-name">' + inv.smallName + '</span>' : ''

          el.innerHTML = `
          <image src="${randomContainer()}" class="card"></image>
          <div class="name">${inv.name.toUpperCase()}${smallNameDiv}</div>
          <image src="${inv.imageURL}" class="itemimg"></image>
          <div class="itemnumber">ITEM ${(i + 1).toString().padStart(2, '0')}</div>
          <div class="price">${inv.hours || '-'}</div>
          <image src="https://cloud-7kkn345tx-hack-club-bot.vercel.app/0energy.png" class="energy"></image>
          `

          document.querySelector('.container').appendChild(el)
        })
        document.querySelector('.item-list > .loading').classList.add('display-none')
      })
    </script>
  </head>
  <body>
    <div class="item-list">
      <div class="heading-card">
        <span>What's in stock?</span>
      </div>
      <!-- item container -->
      <div class="loading">üïπÔ∏è</div>
      
      <div class="container section">



      </div>

    <div class="instructions"> 
      <div class="heading-card">
        <span>How to play:</span>
      </div>
      
      <h2>Step 1: Work on projects!</h2>
      <p>You must be actively working on something, not just passively consuming information. For example: [ ]</p>
      <h2>Step 2: Submit your hours!</h2>
      <p>Use /hack in #hack-hour on the Hack Club Slack to log your hours! It activates a pomodoro timer; the timer should be the length you're planning to work on the project for.</p>
      <h2>Step 3: Redeem your hours for prizes!</h2>
      <p>We're keeping track of your total hours. Now, you could spend them on the prize list below! The number next to the energy is how much they cost.</p>
      <h2>Have fun!</h2>

    </div>

    </div>
  </body>
</html>